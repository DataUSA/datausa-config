global:
    seperator: ","
    name: ipeds

    use_schema: True
    source : "data/ipeds/c<year>_a.zip"

    force_column_uppercase:
        exclude: ["year"]

    strip_column_whitespace: True

    source_vars:
        year:
            start: 2005
            end: 2007

    output : "data/output/ipeds/<year>"

    web_paths:
        "ipeds": "https://nces.ed.gov/ipeds/datacenter/data/c<year>_a.zip"

    transform:
        cip:
            -
                type: replace
                target: "."
                value: ""

    import_to_db: True
    db_settings:
        user: postgres
        password_env_var: DATAUSA_PW
        host: 162.209.124.219
        db_name: datausa
        type:
            degree: text
    rename:
        UNITID: university_id
        CIPCODE: major
        AWLEVEL: degree_id
        CRACE01: total_nonresident_men
        CRACE02: total_nonresident_women
        CRACE03: total_black_men
        CRACE04: total_black_women
        CRACE05: total_native_men
        CRACE06: total_native_women
        CRACE07: total_asian_men
        CRACE08: total_asian_women
        CRACE09: total_hispanic_men
        CRACE10: total_hispanic_women
        CRACE11: total_white_men
        CRACE12: total_white_women
        CRACE13: total_unknown_men
        CRACE14: total_unknown_women
        CRACE15: total_men
        CRACE16: total_women
        CRACE17: total_nonresident
        CRACE18: total_black
        CRACE19: total_native
        CRACE20: total_asian
        CRACE21: total_hispanic
        CRACE22: total_white
        CRACE23: total_unknown
        CRACE24: total

tables:
    grads_yucd:
        pk: ["year", "university_id", "major", "degree_id"]
        agg:
            total: "sum"
            total_men: "sum"
            total_women: "sum"
            total_native: "sum"
            total_native_men: "sum"
            total_native_women: "sum"
            total_asian: "sum"
            total_asian_men: "sum"
            total_asian_women: "sum"
            total_black: "sum"
            total_black_men: "sum"
            total_black_women: "sum"
            total_hispanic: "sum"
            total_hispanic_men: "sum"
            total_hispanic_women: "sum"
            # total_hawaiian: "sum"
            # total_hawaiian_men: "sum"
            # total_hawaiian_women: "sum"
            total_white: "sum"
            total_white_men: "sum"
            total_white_women: "sum"
            # total_multi: "sum"
            # total_multi_men: "sum"
            # total_multi_women: "sum"
            total_unknown: "sum"
            total_unknown_men: "sum"
            total_unknown_women: "sum"
            total_nonresident: "sum"
            total_nonresident_men: "sum"
            total_nonresident_women: "sum"