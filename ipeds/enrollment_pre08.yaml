# enrollment_pre08.yaml

global:
    seperator: ","
    name: ipeds
    source : "data/ipeds/ef<year>a.zip"
    use_schema: True
    force_column_uppercase:
        exclude: ["year"]
    index_col: False
    strip_column_whitespace: True

    source_vars:
        year:
            start: 2005
            end: 2007

    output : "data/output/ipeds/enrollment/<year>"

    web_paths:
        "ipeds": "https://nces.ed.gov/ipeds/datacenter/data/ef<year>a.zip"

    na_values: ['.', '. ']

    fillna:
        mode: True
        value: 0

    import_to_db: True
    db_settings:
        user: postgres
        password_env_var: DATAUSA_PW
        host: 162.209.124.219
        db_name: datausa
        type:
            degree: text
    transform:
        course_id:
            -
                type: replace
                target: "."
                value: ""

    agg:
        total: "sum"
        men: "sum"
        women: "sum"
        asian: "sum"
        native: "sum"
        white: "sum"
        black: "sum"
        hispanic: "sum"
        unknown: "sum"
        nonresident: "sum"

    rename:
        UNITID: university_id
        EFRACE01: nonresident_men
        EFRACE02: nonresident_women
        EFRACE03: black_men
        EFRACE04: black_women
        EFRACE05: native_men
        EFRACE06: native_women
        EFRACE07: asian_men
        EFRACE08: asian_women
        EFRACE09: hispanic_men
        EFRACE10: hispanic_women
        EFRACE11: white_men
        EFRACE12: white_women
        EFRACE13: unknown_men
        EFRACE14: unknown_women
        EFRACE15: men
        EFRACE16: women
        EFRACE17: nonresident
        EFRACE18: black
        EFRACE19: native
        EFRACE20: asian
        EFRACE21: hispanic
        EFRACE22: white
        EFRACE23: unknown
        EFRACE24: total

tables:
    enrollment_yu:
        pk: ["year", "university_id"]
