global:
    seperator: ","
    name: pums
    use_schema: True
    source : "/tmp/pums/<year>/<est>/csv_hus.zip"
    source_vars:
        year:
            start: 2013
            end: 2013
        est: [1]
    archive_files: "csv"
    strip_column_whitespace: True
    force_column_uppercase:
        exclude: ["year", "est", "geo_id"]
    output : "/tmp/pums_house_output/<year>/<est>/"
    web_paths:
        pums: "ftp://ftp.census.gov/acs<year>_<est>yr/pums/csv_hus.zip"
    type:
        ST: "str"

    agg: "sum"

    import_to_db: True
    db_settings:
        user: postgres
        password_env_var: DATAUSA_PW
        host: 162.209.124.219
        db_name: datausa

    transform:
        df:
            type: frame_func
            func: "plugins.census.pums.process"
            sumlevel: "puma"
            mode: household

    rename:
        ACCESS: internet_access

    named_transforms:
        pums_state: 
            type: frame_func
            func: "plugins.census.pums.process"
            sumlevel: "state"
            mode: household
        pums_nation: 
            type: frame_func
            func: "plugins.census.pums.process"
            sumlevel: "nation"
            mode: household

tables:
    puma_yg_internet:
        pk: ["year", "geo_id", "internet_access"]
    state_yg_internet:
        pk: ["year", "geo_id", "internet_access"]
        transform:
            df: pums_state
    nation_yg_internet:
        pk: ["year", "geo_id", "internet_access"]
        transform:
            df: pums_nation
